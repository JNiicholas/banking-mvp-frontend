{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/scheduler/run-s3-inventory":{"get":{"tags":["Scheduler"],"summary":"Run S3 inventory job now","description":"Manually triggers the nightly S3 inventory job that lists SIP daily aggregate files in S3 and logs a brief summary.","operationId":"trigger_s3_inventory_scheduler_run_s3_inventory_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/scheduler/run-pricing-backfill":{"post":{"tags":["Pricing","Scheduler"],"summary":"Backfill pricing data","description":"Builds the list of SIP daily aggregate flatfiles from S3 and optionally ingests them into MongoDB. Can run synchronously or as a background job.","operationId":"trigger_pricing_backfill_scheduler_run_pricing_backfill_post","parameters":[{"name":"start","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Start date YYYY-MM-DD (inclusive)","title":"Start"},"description":"Start date YYYY-MM-DD (inclusive)"},{"name":"end","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"End date YYYY-MM-DD (inclusive)","title":"End"},"description":"End date YYYY-MM-DD (inclusive)"},{"name":"workers","in":"query","required":false,"schema":{"type":"integer","maximum":16,"minimum":1,"default":6,"title":"Workers"}},{"name":"dry_run","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Dry Run"}},{"name":"max_days","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Max Days"}},{"name":"background","in":"query","required":false,"schema":{"type":"boolean","description":"If true, run in background and return a job_id immediately","default":false,"title":"Background"},"description":"If true, run in background and return a job_id immediately"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/scheduler/backfill/status/{job_id}":{"get":{"tags":["Pricing","Scheduler"],"summary":"Check pricing backfill job status","description":"Poll the status and result of a background pricing backfill job by its job_id.","operationId":"pricing_backfill_status_scheduler_backfill_status__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividends/search":{"post":{"tags":["Dividend Search","Dividends"],"summary":"Search dividends by filters","description":"Search the dividends time-series collection.\n\nFrequency values: 0 (one-time), 1 (annually), 2 (bi-annually), 4 (quarterly), 12 (monthly), 24 (bi-monthly), 52 (weekly).\n\nDividend types:\n- CD — Cash Dividend\n- SC — Special Cash Dividend","operationId":"search_dividends_api_dividends_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DividendSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DividendSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividends/{ticker}":{"get":{"tags":["Dividend Search","Dividends"],"summary":"Recent dividends for a ticker (DB-backed)","description":"Reads directly from your internal `dividends` collection instead of calling external APIs.\n\nSupports paging, sorting, optional ex-dividend date window, and free-text search across date fields and cash amount.\nReturns the company name from the `tickers` collection alongside the ticker.","operationId":"dividends_endpoint_api_dividends__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number (1-based)","default":1,"title":"Page"},"description":"Page number (1-based)"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Page size","default":50,"title":"Page Size"},"description":"Page size"},{"name":"order","in":"query","required":false,"schema":{"type":"string","description":"Sort order: 'asc' or 'desc'","default":"asc","title":"Order"},"description":"Sort order: 'asc' or 'desc'"},{"name":"sort","in":"query","required":false,"schema":{"type":"string","description":"Field to sort by, e.g., 'ex_dividend_date' or 'pay_date'","default":"ex_dividend_date","title":"Sort"},"description":"Field to sort by, e.g., 'ex_dividend_date' or 'pay_date'"},{"name":"ex_dividend_date_gte","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter: ex-dividend date >= (YYYY-MM-DD)","title":"Ex Dividend Date Gte"},"description":"Filter: ex-dividend date >= (YYYY-MM-DD)"},{"name":"ex_dividend_date_lte","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter: ex-dividend date <= (YYYY-MM-DD)","title":"Ex Dividend Date Lte"},"description":"Filter: ex-dividend date <= (YYYY-MM-DD)"},{"name":"searchString","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Free-text search across dates and cash_amount","title":"Searchstring"},"description":"Free-text search across dates and cash_amount"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividends/yearly/{ticker}":{"get":{"tags":["Dividend Search","Dividends"],"summary":"Yearly dividend history (DB-backed)","description":"Aggregates per-year dividend totals from the `dividends` collection for the given ticker.\nMarks the current year as YTD and returns the company name from the `tickers` collection.","operationId":"dividends_yearly_endpoint_api_dividends_yearly__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividends/tickers":{"post":{"tags":["Dividend Search","Dividends"],"summary":"List unique dividend payers (tickers) for a frequency (e.g., monthly=12)","description":"Return only the **tickers** that pay dividends with the requested `frequency` (default: monthly = 12), optionally filtered by an ex-dividend date window.\n\n- **frequency**: 0 (one-time), 1 (annual), 2 (semi-annual), 4 (quarterly), 12 (monthly), 24 (bi-monthly), 52 (weekly).\n- **dividend_type**: e.g. [\"CD\"] for regular cash dividends, [\"SC\"] for special.\n- **include_market**: if true (default), each row includes the `market` looked up from the `tickers` collection.\n- Sorted alphabetically by ticker; paginated with `page` / `page_size`.","operationId":"list_dividend_tickers_api_dividends_tickers_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DividendTickersRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DividendTickersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividends/unique-tickers":{"post":{"tags":["Dividend Search","Dividends","Database"],"summary":"List unique dividend payers (DB-backed)","description":"Returns unique tickers paying dividends at the requested frequency from the internal `dividends` collection.\n\n- **frequency**: 0 (one-time), 1 (annual), 2 (semi-annual), 4 (quarterly), 12 (monthly), 24 (bi-monthly), 52 (weekly).\n- **dividend_type**: e.g. [\"CD\"] for regular cash dividends, [\"SC\"] for special.\n- **include_market**: if true (default), each row includes the `market` looked up from `tickers`.\n- Sorted alphabetically by ticker; paginated with `page` / `page_size`.","operationId":"list_dividend_tickers_api_dividends_unique_tickers_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DividendTickersRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DividendTickersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ingest/day":{"post":{"tags":["Dividend Search","Pricing Ingest"],"summary":"Ingest daily pricing file","description":"Ingests the daily pricing data file for a specific date into MongoDB. Optionally restricts processing to a specific list of tickers.","operationId":"ingest_daily_file_api_ingest_day_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DailyIngestRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IngestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividend-metrics/rebuild":{"post":{"tags":["Dividend Metrics","Dividend Metrics • TTM"],"summary":"Rebuild metrics for all tickers (TTM)","description":"Triggers a background rebuild of the **TTM dividend metrics** for the entire universe. The call returns immediately while work continues in the background.","operationId":"api_rebuild_all_metrics_api_dividend_metrics_rebuild_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RebuildAllResponse"}}}}}}},"/api/dividend-metrics/rebuild/{ticker}":{"post":{"tags":["Dividend Metrics","Dividend Metrics • TTM"],"summary":"Rebuild metrics for a single ticker","description":"Recomputes the **TTM dividend metrics** document for the specified ticker and returns the updated snapshot.","operationId":"api_rebuild_one_metrics_api_dividend_metrics_rebuild__ticker__post","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RebuildOneResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividend-metrics/search":{"get":{"tags":["Dividend Metrics","Dividend Metrics • TTM"],"summary":"Search materialized metrics by TTM dividend yield (min/max)","description":"Screens the `dividend_metrics` collection using **TTM dividend yield**, optionally constrained by an upper bound and/or an exact detected payment frequency (TTM window). Supports pagination.","operationId":"api_find_by_yield_api_dividend_metrics_search_get","parameters":[{"name":"min_yield","in":"query","required":false,"schema":{"type":"number","description":"Minimum TTM dividend yield (%)","default":5.0,"title":"Min Yield"},"description":"Minimum TTM dividend yield (%)"},{"name":"max_yield","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Maximum TTM dividend yield (%)","title":"Max Yield"},"description":"Maximum TTM dividend yield (%)"},{"name":"freq","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Exact number of dividend payments detected in the rolling TTM window (e.g., 12=monthly, 4=quarterly)","title":"Freq"},"description":"Exact number of dividend payments detected in the rolling TTM window (e.g., 12=monthly, 4=quarterly)"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MetricsSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividend-metrics-yearly/rebuild":{"post":{"tags":["Dividend Metrics Yearly","Dividend Metrics • Yearly"],"summary":"Rebuild yearly dividend metrics for the full universe","description":"Triggers an asynchronous rebuild of yearly dividend snapshots for all tickers. Optionally bound the year range and include the current YTD partial year.","operationId":"api_rebuild_all_yearly_metrics_api_dividend_metrics_yearly_rebuild_post","parameters":[{"name":"include_ytd","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Include Ytd"}},{"name":"min_year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Year"}},{"name":"max_year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Year"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividend-metrics-yearly/rebuild/{ticker}":{"post":{"tags":["Dividend Metrics Yearly","Dividend Metrics • Yearly"],"summary":"Rebuild yearly dividend metrics for a single ticker","description":"Rebuilds yearly snapshots for one ticker. Can run in the background and be limited to a year range; optionally include the current YTD.","operationId":"api_rebuild_one_yearly_metrics_api_dividend_metrics_yearly_rebuild__ticker__post","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"background","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Background"}},{"name":"include_ytd","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Include Ytd"}},{"name":"min_year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Year"}},{"name":"max_year","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Year"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividend-metrics-yearly/year/{year}":{"get":{"tags":["Dividend Metrics Yearly","Dividend Metrics • Yearly"],"summary":"Screen by calendar year","description":"Returns paged yearly dividend snapshots for a specific calendar year, optionally filtering by a minimum and/or maximum dividend yield for that year.","operationId":"api_find_yearly_by_year_api_dividend_metrics_yearly_year__year__get","parameters":[{"name":"year","in":"path","required":true,"schema":{"type":"integer","title":"Year"}},{"name":"min_yield","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Minimum year_yield filter (e.g. 4.0 for 4%)","title":"Min Yield"},"description":"Minimum year_yield filter (e.g. 4.0 for 4%)"},{"name":"max_yield","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"description":"Maximum year_yield filter (e.g. 10.0 for 10%)","title":"Max Yield"},"description":"Maximum year_yield filter (e.g. 10.0 for 10%)"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"1-based page number","default":1,"title":"Page"},"description":"1-based page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Results per page (max 500)","default":100,"title":"Page Size"},"description":"Results per page (max 500)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/dividend-metrics-yearly/history/{ticker}":{"get":{"tags":["Dividend Metrics Yearly","Dividend Metrics • Yearly"],"summary":"Get yearly dividend history for a ticker","description":"Returns descending yearly dividend snapshots (one document per year) for the given ticker. Useful to chart dividend growth and yield history.","operationId":"api_get_yearly_history_api_dividend_metrics_yearly_history__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"limit_years","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit Years"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/rebuild":{"post":{"tags":["financials Metrics","Financials","Admin"],"summary":"Rebuild materialized financials for the whole universe","description":"Starts a background job that fetches raw filings from Polygon.io, upserts them into `financials_raw`, and (re)computes derived metrics into `financials_materialized`. Use `workers` to control parallelism and `max_tickers` to limit scope for testing.","operationId":"api_rebuild_financials_api_financials_rebuild_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RebuildPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/upsert":{"post":{"tags":["financials Metrics","Financials","Admin"],"summary":"Fetch & upsert financials for specific tickers","description":"Fetches recent financial filings for the provided tickers from Polygon.io and updates both `financials_raw` and `financials_materialized` for only those tickers.","operationId":"api_upsert_financials_api_financials_upsert_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpsertPayload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/{ticker}/latest":{"get":{"tags":["financials Metrics","Financials"],"summary":"Latest materialized financial snapshot","description":"Returns the most recent TTM snapshot for the specified ticker from `financials_materialized`, including computed metrics such as dividend payout ratios, margins, and valuation multiples when available.","operationId":"api_financials_latest_api_financials__ticker__latest_get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/{ticker}/history":{"get":{"tags":["financials Metrics","Financials"],"summary":"Financial filings history (descending)","description":"Returns recent raw financial filings for a ticker (most recent first). Use `limit` to control how many filings are returned.","operationId":"api_financials_history_api_financials__ticker__history_get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Max number of filings to return","default":20,"title":"Limit"},"description":"Max number of filings to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/search":{"get":{"tags":["financials Metrics","Financials","Screening"],"summary":"Screen materialized financials","description":"Filters and sorts the `financials_materialized` snapshots using optional constraints such as market cap, P/E, P/B, P/S, dividend yield, payout ratio, leverage, and growth metrics. Supports pagination via `page` and `page_size`.","operationId":"api_financials_search_api_financials_search_get","parameters":[{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"Field to sort by (e.g., market_cap, pe, dividend_yield, revenue_growth_yoy)","default":"market_cap","title":"Sort By"},"description":"Field to sort by (e.g., market_cap, pe, dividend_yield, revenue_growth_yoy)"},{"name":"sort_dir","in":"query","required":false,"schema":{"$ref":"#/components/schemas/SortDir","default":"desc"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Page Size"}},{"name":"sector","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/GICSSector"},{"type":"null"}],"title":"Sector"}},{"name":"industry","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Industry"}},{"name":"min_mcap","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Min Mcap"}},{"name":"max_mcap","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Mcap"}},{"name":"min_pe","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Min Pe"}},{"name":"max_pe","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Pe"}},{"name":"min_pb","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Min Pb"}},{"name":"max_pb","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Pb"}},{"name":"min_ps","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Min Ps"}},{"name":"max_ps","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Ps"}},{"name":"min_dividend_yield","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Min Dividend Yield"}},{"name":"max_dividend_yield","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Dividend Yield"}},{"name":"max_payout_ratio","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Payout Ratio"}},{"name":"max_net_debt_to_ebitda","in":"query","required":false,"schema":{"anyOf":[{"type":"number","minimum":0},{"type":"null"}],"title":"Max Net Debt To Ebitda"}},{"name":"min_revenue_growth_yoy","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Revenue Growth Yoy"}},{"name":"min_eps_growth_yoy","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Eps Growth Yoy"}},{"name":"frequency","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Frequency"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tickers/search":{"get":{"tags":["tickers","Tickers"],"summary":"Autocomplete tickers by symbol or company name","description":"Case-insensitive search over `ticker` and `name` fields in the tickers collection.","operationId":"search_tickers_endpoint_api_tickers_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"User input (symbol or company substring)","title":"Q"},"description":"User input (symbol or company substring)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tickers/harvest-details":{"post":{"tags":["tickers","Tickers"],"summary":"Manually start Polygon ticker details harvest","description":"Kick off the enrichment job that fetches Polygon Ticker Overview details and updates the DB. Runs asynchronously so the request returns immediately.","operationId":"start_ticker_details_harvest_endpoint_api_tickers_harvest_details_post","parameters":[{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Process inactive tickers too","default":false,"title":"Include Inactive"},"description":"Process inactive tickers too"},{"name":"max_tickers","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"description":"Limit the number of tickers to process","title":"Max Tickers"},"description":"Limit the number of tickers to process"},{"name":"skip_fresh_days","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Skip tickers updated within this many days","default":7,"title":"Skip Fresh Days"},"description":"Skip tickers updated within this many days"},{"name":"concurrency","in":"query","required":false,"schema":{"type":"integer","maximum":64,"minimum":1,"description":"Concurrent workers","default":12,"title":"Concurrency"},"description":"Concurrent workers"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/tickers/harvest-branding":{"post":{"tags":["tickers","Tickers"],"summary":"Manually start Polygon ticker branding harvest","description":"Kick off the enrichment job that fetches Polygon Ticker branding (logos/icons) and updates the DB. Runs asynchronously so the request returns immediately.","operationId":"start_ticker_branding_harvest_endpoint_api_tickers_harvest_branding_post","parameters":[{"name":"skip_existing","in":"query","required":false,"schema":{"type":"boolean","description":"Skip tickers that already have branding stored","default":true,"title":"Skip Existing"},"description":"Skip tickers that already have branding stored"},{"name":"max_tickers","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"description":"Limit the number of tickers to process","title":"Max Tickers"},"description":"Limit the number of tickers to process"},{"name":"concurrency","in":"query","required":false,"schema":{"type":"integer","maximum":64,"minimum":1,"description":"Concurrent workers","default":16,"title":"Concurrency"},"description":"Concurrent workers"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/mcpagent/ask":{"post":{"tags":["mcpagent"],"summary":"Ask","operationId":"ask_api_mcpagent_ask_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AskBody"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentUIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/static/reference/gics-sectors":{"get":{"tags":["static content"],"summary":"Get list of GICS sectors","description":"Returns the list of defined GICS sectors for use in dropdowns or filters.","operationId":"get_gics_sectors_api_static_reference_gics_sectors_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/aggregates/custom-bars":{"get":{"tags":["aggregate timeseries bars"],"summary":"Get Custom Bars","description":"Fetch Polygon custom aggregate bars for a ticker over a date range.\n\nMirrors Polygon's /v2/aggs/ticker/{ticker}/range/{multiplier}/{timespan}/{from}/{to}.\nReturns a list of bars (dicts) suitable for charting.","operationId":"get_custom_bars_api_aggregates_custom_bars_get","parameters":[{"name":"ticker","in":"query","required":true,"schema":{"type":"string","minLength":1,"title":"Ticker"}},{"name":"multiplier","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Multiplier"}},{"name":"timespan","in":"query","required":false,"schema":{"enum":["second","minute","hour","day","week","month","quarter","year"],"type":"string","default":"day","title":"Timespan"}},{"name":"from","in":"query","required":true,"schema":{"type":"string","title":"From"}},{"name":"to","in":"query","required":true,"schema":{"type":"string","title":"To"}},{"name":"adjusted","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":true,"title":"Adjusted"}},{"name":"sort","in":"query","required":false,"schema":{"enum":["asc","desc"],"type":"string","default":"asc","title":"Sort"}},{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":50000,"minimum":1},{"type":"null"}],"title":"Limit"}},{"name":"max_items","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Max Items"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AggBar"},"title":"Response Get Custom Bars Api Aggregates Custom Bars Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/news/ticker":{"get":{"tags":["news"],"summary":"Get Ticker News","description":"Proxy to Polygon ticker news.\nDocs: https://polygon.io/docs/rest/stocks/news\n\nExamples:\n  /api/news/ticker?ticker=AAPL&limit=25&order=desc\n  /api/news/ticker?published_utc_gte=2025-09-01&order=asc","operationId":"get_ticker_news_api_news_ticker_get","parameters":[{"name":"ticker","in":"query","required":false,"schema":{"anyOf":[{"type":"string","minLength":1},{"type":"null"}],"title":"Ticker"}},{"name":"published_utc_gte","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ISO 8601, e.g. 2025-09-01 or 2025-09-01T00:00:00Z","title":"Published Utc Gte"},"description":"ISO 8601, e.g. 2025-09-01 or 2025-09-01T00:00:00Z"},{"name":"published_utc_lte","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"ISO 8601","title":"Published Utc Lte"},"description":"ISO 8601"},{"name":"order","in":"query","required":false,"schema":{"anyOf":[{"enum":["asc","desc"],"type":"string"},{"type":"null"}],"default":"desc","title":"Order"}},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"published_utc","title":"Sort"}},{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":1000,"minimum":1},{"type":"null"}],"default":50,"title":"Limit"}},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},{"name":"max_items","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Max Items"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/NewsItem"},"title":"Response Get Ticker News Api News Ticker Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/{ticker}/summary":{"get":{"tags":["financials-summary"],"summary":"Get Financial Summary","operationId":"get_financial_summary_api_financials__ticker__summary_get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Start of the window (inclusive)","title":"From Date"},"description":"Start of the window (inclusive)"},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"End of the window (inclusive)","title":"To Date"},"description":"End of the window (inclusive)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinancialsSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/{ticker}/timeseries":{"get":{"tags":["financials-summary"],"summary":"Get Financial Timeseries","operationId":"get_financial_timeseries_api_financials__ticker__timeseries_get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"periodicity","in":"query","required":false,"schema":{"$ref":"#/components/schemas/Periodicity","default":"quarter"}},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"From Date"}},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"To Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinancialsTimeseriesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/financials/{ticker}/ratios":{"get":{"tags":["financials-summary"],"summary":"Get Financial Ratios","operationId":"get_financial_ratios_api_financials__ticker__ratios_get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"periodicity","in":"query","required":false,"schema":{"$ref":"#/components/schemas/Periodicity","default":"quarter"}},{"name":"from_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Start of the window (inclusive)","title":"From Date"},"description":"Start of the window (inclusive)"},{"name":"to_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"End of the window (inclusive)","title":"To Date"},"description":"End of the window (inclusive)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FinancialsRatiosResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/watchlists/":{"get":{"tags":["watchlists"],"summary":"List Watchlists","operationId":"list_watchlists_api_watchlists__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/WatchlistOut"},"type":"array","title":"Response List Watchlists Api Watchlists  Get"}}}}}},"post":{"tags":["watchlists"],"summary":"Create Watchlist","operationId":"create_watchlist_api_watchlists__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/watchlists/{watchlist_id}":{"get":{"tags":["watchlists"],"summary":"Get Watchlist","operationId":"get_watchlist_api_watchlists__watchlist_id__get","parameters":[{"name":"watchlist_id","in":"path","required":true,"schema":{"type":"string","title":"Watchlist Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["watchlists"],"summary":"Update Watchlist","operationId":"update_watchlist_api_watchlists__watchlist_id__patch","parameters":[{"name":"watchlist_id","in":"path","required":true,"schema":{"type":"string","title":"Watchlist Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["watchlists"],"summary":"Delete Watchlist","operationId":"delete_watchlist_api_watchlists__watchlist_id__delete","parameters":[{"name":"watchlist_id","in":"path","required":true,"schema":{"type":"string","title":"Watchlist Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/watchlists/{watchlist_id}/items":{"post":{"tags":["watchlists"],"summary":"Add Items","operationId":"add_items_api_watchlists__watchlist_id__items_post","parameters":[{"name":"watchlist_id","in":"path","required":true,"schema":{"type":"string","title":"Watchlist Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddItemsPayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/watchlists/{watchlist_id}/items/{symbol}":{"delete":{"tags":["watchlists"],"summary":"Remove Item","operationId":"remove_item_api_watchlists__watchlist_id__items__symbol__delete","parameters":[{"name":"watchlist_id","in":"path","required":true,"schema":{"type":"string","title":"Watchlist Id"}},{"name":"symbol","in":"path","required":true,"schema":{"type":"string","title":"Symbol"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/watchlists/{watchlist_id}/items/reorder":{"patch":{"tags":["watchlists"],"summary":"Reorder Items","operationId":"reorder_items_api_watchlists__watchlist_id__items_reorder_patch","parameters":[{"name":"watchlist_id","in":"path","required":true,"schema":{"type":"string","title":"Watchlist Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReorderPayload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WatchlistOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/polygon/fetch-tickers":{"post":{"tags":["Polygon"],"summary":"Fetch & cache Polygon tickers","description":"Fetches the current list of tickers from Polygon and upserts them into MongoDB.\n\nBy default this endpoint **does not** write the large JSON dump to disk. Pass `write_json=true` to also persist a dated file named `allTickers_<YYYY-MM-DD>.json` on the server. MongoDB upserts are performed regardless of this flag.\n\n**Query parameters:**\n- `start_gte` (str, default: 'A'): Lower bound for ticker symbol (inclusive).\n- `limit` (int, default: 1000): Page size used for fetching from Polygon.\n- `write_json` (bool, default: false): Also write the raw JSON file in addition to Mongo upserts.\n\n**Response:**\nReturns the resolved file path (or null if skipped), the file size in MB (0 when skipped), and the `write_json` flag.","operationId":"polygon_fetch_tickers_polygon_fetch_tickers_post","parameters":[{"name":"start_gte","in":"query","required":false,"schema":{"type":"string","default":"A","title":"Start Gte"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":1000,"title":"Limit"}},{"name":"write_json","in":"query","required":false,"schema":{"type":"boolean","description":"If true, also write the raw JSON dump (allTickers_<date>.json). Defaults to false. Mongo upsert always runs.","default":false,"title":"Write Json"},"description":"If true, also write the raw JSON dump (allTickers_<date>.json). Defaults to false. Mongo upsert always runs."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/last-quote/{ticker}":{"get":{"tags":["Market Data"],"summary":"Get latest NBBO quote","description":"Returns the latest NBBO quote for the given stock ticker.","operationId":"last_quote_endpoint_last_quote__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dividends/{ticker}":{"get":{"tags":["Dividends"],"summary":"Recent dividends for a ticker","description":"Fetches recent dividend events for the specified ticker.","operationId":"dividends_endpoint_dividends__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number (1-based)","default":1,"title":"Page"},"description":"Page number (1-based)"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Page size","default":50,"title":"Page Size"},"description":"Page size"},{"name":"order","in":"query","required":false,"schema":{"type":"string","description":"Order of results: 'asc' or 'desc'","default":"asc","title":"Order"},"description":"Order of results: 'asc' or 'desc'"},{"name":"sort","in":"query","required":false,"schema":{"type":"string","description":"Field to sort by, e.g., 'ex_dividend_date' or 'payment_date'","default":"ex_dividend_date","title":"Sort"},"description":"Field to sort by, e.g., 'ex_dividend_date' or 'payment_date'"},{"name":"ex_dividend_date_gte","in":"query","required":false,"schema":{"type":"string","description":"Filter: ex-dividend date greater or equal (YYYY-MM-DD)","title":"Ex Dividend Date Gte"},"description":"Filter: ex-dividend date greater or equal (YYYY-MM-DD)"},{"name":"ex_dividend_date_lte","in":"query","required":false,"schema":{"type":"string","description":"Filter: ex-dividend date less or equal (YYYY-MM-DD)","title":"Ex Dividend Date Lte"},"description":"Filter: ex-dividend date less or equal (YYYY-MM-DD)"},{"name":"searchString","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Free-text search across declaration_date, ex_dividend_date, pay_date, record_date, and cash_amount","title":"Searchstring"},"description":"Free-text search across declaration_date, ex_dividend_date, pay_date, record_date, and cash_amount"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ticker-details/{ticker}":{"get":{"tags":["Market Data"],"summary":"Ticker details","description":"Returns company and instrument details for the given ticker from Polygon.","operationId":"ticker_details_endpoint_ticker_details__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dividends/frequency/{frequency}":{"get":{"tags":["Dividends"],"summary":"Dividends by payout frequency","description":"Returns dividend data filtered by payout frequency (0, 1, 2, 4, 12, 24, 52).","operationId":"dividends_by_frequency_endpoint_dividends_frequency__frequency__get","parameters":[{"name":"frequency","in":"path","required":true,"schema":{"type":"integer","title":"Frequency"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":1000,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dividends/frequency/{frequency}/tickers":{"get":{"tags":["Dividends"],"summary":"Tickers paying at a frequency","description":"Lists unique tickers that currently pay with the given dividend frequency within a recent lookback window.","operationId":"unique_payers_by_frequency_dividends_frequency__frequency__tickers_get","parameters":[{"name":"frequency","in":"path","required":true,"schema":{"type":"integer","title":"Frequency"}},{"name":"lookback_days","in":"query","required":false,"schema":{"type":"integer","default":420,"title":"Lookback Days"}},{"name":"min_count","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Min Count"}},{"name":"limit_per_page","in":"query","required":false,"schema":{"type":"integer","default":1000,"title":"Limit Per Page"}},{"name":"order","in":"query","required":false,"schema":{"type":"string","default":"desc","title":"Order"}},{"name":"sort","in":"query","required":false,"schema":{"type":"string","default":"ex_dividend_date","title":"Sort"}},{"name":"max_records","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":200000,"title":"Max Records"}},{"name":"just_tickers","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Just Tickers"}},{"name":"growth_check_every","in":"query","required":false,"schema":{"type":"integer","default":1000,"title":"Growth Check Every"}},{"name":"stop_when_no_growth_steps","in":"query","required":false,"schema":{"type":"integer","default":5,"title":"Stop When No Growth Steps"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dividends/history/harvest":{"post":{"tags":["Dividends"],"summary":"Harvest complete dividend history","description":"Fetches complete dividend history for all available tickers from Polygon and writes NDJSON files per ticker.","operationId":"harvest_dividend_history_endpoint_dividends_history_harvest_post","parameters":[{"name":"out_dir","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Out Dir"}},{"name":"concurrency","in":"query","required":false,"schema":{"type":"integer","default":8,"title":"Concurrency"}},{"name":"limit_per_page","in":"query","required":false,"schema":{"type":"integer","default":1000,"title":"Limit Per Page"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}},{"name":"max_tickers","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Tickers"}},{"name":"skip_existing","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Skip Existing"}},{"name":"write_json","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Write Json"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dividends/harvest/start":{"post":{"tags":["Dividends"],"summary":"Start async dividend harvest","description":"Starts a background task to harvest complete dividend history for all tickers and returns a job_id.","operationId":"start_dividend_harvest_dividends_harvest_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/dividends/harvest/status/{job_id}":{"get":{"tags":["Dividends"],"summary":"Dividend harvest status","description":"Poll the status of a running/background dividend harvest job by job_id.","operationId":"harvest_status_dividends_harvest_status__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/features/{ticker}":{"get":{"tags":["Features"],"summary":"Feature pack for a ticker","description":"Returns a compact feature pack (price summary, technical indicators, options, fundamentals, sentiment) for the given ticker. Placeholder response.","operationId":"get_features_features__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/bars/{ticker}":{"get":{"tags":["Market Data"],"summary":"OHLCV bars","description":"Returns OHLCV bars for the given ticker for a specified interval and range. Placeholder response.","operationId":"get_bars_bars__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"interval","in":"query","required":false,"schema":{"type":"string","description":"Bar interval, e.g. 1d, 1h, 5m","default":"1d","title":"Interval"},"description":"Bar interval, e.g. 1d, 1h, 5m"},{"name":"range","in":"query","required":false,"schema":{"type":"string","description":"Range of data, e.g. 1m, 6mo, 1y","default":"1m","title":"Range"},"description":"Range of data, e.g. 1m, 6mo, 1y"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/options/{ticker}":{"get":{"tags":["Options"],"summary":"Options chain slice","description":"Returns a filtered slice of the options chain for the given ticker. Placeholder response.","operationId":"get_options_chain_options__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}},{"name":"expiry","in":"query","required":false,"schema":{"type":"string","description":"Option expiry date (YYYY-MM-DD)","title":"Expiry"},"description":"Option expiry date (YYYY-MM-DD)"},{"name":"strikes","in":"query","required":false,"schema":{"type":"string","description":"Comma-separated list of strikes","title":"Strikes"},"description":"Comma-separated list of strikes"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/news/{ticker}":{"get":{"tags":["News"],"summary":"Recent news for a ticker","description":"Returns recent headlines and sentiment for the ticker. Placeholder response.","operationId":"get_news_news__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/fundamentals/{ticker}":{"get":{"tags":["Fundamentals"],"summary":"Fundamentals for a ticker","description":"Returns key fundamentals and financials summary for the ticker. Placeholder response.","operationId":"get_fundamentals_fundamentals__ticker__get","parameters":[{"name":"ticker","in":"path","required":true,"schema":{"type":"string","title":"Ticker"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/macro":{"get":{"tags":["Macro"],"summary":"Macroeconomic context","description":"Returns macroeconomic context data. Placeholder response.","operationId":"get_macro_macro_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/hello/{name}":{"get":{"summary":"Say Hello","operationId":"say_hello_hello__name__get","parameters":[{"name":"name","in":"path","required":true,"schema":{"type":"string","title":"Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AddItemsPayload":{"properties":{"symbols":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Symbols"}},"type":"object","required":["symbols"],"title":"AddItemsPayload"},"AgentUI":{"properties":{"meta":{"$ref":"#/components/schemas/UIMeta"},"tables":{"items":{"$ref":"#/components/schemas/UITable"},"type":"array","title":"Tables"},"charts":{"items":{"$ref":"#/components/schemas/ChartSpec"},"type":"array","title":"Charts"},"badges":{"items":{"$ref":"#/components/schemas/UIBadge"},"type":"array","title":"Badges"}},"additionalProperties":true,"type":"object","title":"AgentUI","description":"Structured UI payload the frontend binds to.\n- tables: list of table specs\n- charts: list of chart specs\n- badges: quick labels/metrics\n- meta: top-level metadata (ticker, asOf, notes)"},"AgentUIResponse":{"properties":{"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"},"html":{"type":"string","minLength":1,"title":"Html","description":"Short HTML summary for the user."},"ui":{"$ref":"#/components/schemas/AgentUI"},"provenance":{"anyOf":[{"$ref":"#/components/schemas/Provenance"},{"type":"null"}]}},"additionalProperties":false,"type":"object","required":["html"],"title":"AgentUIResponse","description":"Full response the backend returns to the Angular app or that the\n`format_response` tool validates and returns.\n\nContract:\n- `html`: short, safe HTML snippet (rendered in the left/top panel)\n- `ui`: structured payload for PrimeNG tables/charts/badges\n- `provenance`: optional tool-call trace for transparency\n- `request_id`: optional correlation ID for logs\n\nBackward-compat:\n- We also accept *top-level* `tables`, `charts`, `badges`, `sections`, and `meta`.\n  They will be normalized into `ui.tables`, `ui.charts`, `ui.badges`, `ui.sections`, and `ui.meta`."},"AggBar":{"properties":{"t":{"type":"integer","title":"T"},"o":{"type":"number","title":"O"},"h":{"type":"number","title":"H"},"l":{"type":"number","title":"L"},"c":{"type":"number","title":"C"},"v":{"anyOf":[{"type":"number"},{"type":"integer"}],"title":"V"},"n":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"N"},"vw":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Vw"}},"type":"object","required":["t","o","h","l","c","v"],"title":"AggBar"},"AskBody":{"properties":{"question":{"type":"string","title":"Question"}},"type":"object","required":["question"],"title":"AskBody"},"BalanceFlat":{"properties":{"assets":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Assets"},"current_assets":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Current Assets"},"inventory":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Inventory"},"other_current_assets":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Other Current Assets"},"noncurrent_assets":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Noncurrent Assets"},"fixed_assets":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Fixed Assets"},"other_noncurrent_assets":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Other Noncurrent Assets"},"liabilities":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Liabilities"},"current_liabilities":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Current Liabilities"},"accounts_payable":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Accounts Payable"},"other_current_liabilities":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Other Current Liabilities"},"noncurrent_liabilities":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Noncurrent Liabilities"},"long_term_debt":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Long Term Debt"},"equity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Equity"},"liabilities_and_equity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Liabilities And Equity"}},"type":"object","title":"BalanceFlat"},"CashflowFlat":{"properties":{"net_cash_flow_from_operating_activities":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Cash Flow From Operating Activities"},"net_cash_flow_from_investing_activities":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Cash Flow From Investing Activities"},"net_cash_flow_from_financing_activities":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Cash Flow From Financing Activities"},"net_cash_flow":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Cash Flow"}},"type":"object","title":"CashflowFlat"},"ChartData":{"properties":{"labels":{"items":{"type":"string"},"type":"array","title":"Labels"},"datasets":{"items":{"$ref":"#/components/schemas/ChartDataset"},"type":"array","title":"Datasets"}},"type":"object","required":["labels","datasets"],"title":"ChartData","description":"Chart.js data payload."},"ChartDataset":{"properties":{"label":{"type":"string","title":"Label"},"data":{"items":{"anyOf":[{"type":"number"},{"type":"null"}]},"type":"array","title":"Data"}},"additionalProperties":true,"type":"object","required":["label","data"],"title":"ChartDataset","description":"Chart.js dataset."},"ChartSpec":{"properties":{"id":{"type":"string","title":"Id"},"type":{"type":"string","enum":["bar","line","pie","doughnut","radar","polarArea"],"title":"Type"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"data":{"$ref":"#/components/schemas/ChartData"},"options":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Options"}},"additionalProperties":true,"type":"object","required":["id","type","data"],"title":"ChartSpec","description":"A single chart card the UI can render via <p-chart>."},"ComprehensiveFlat":{"properties":{"comprehensive_income_loss":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Comprehensive Income Loss"},"other_comprehensive_income_loss_attributable_to_parent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Other Comprehensive Income Loss Attributable To Parent"}},"type":"object","title":"ComprehensiveFlat"},"DailyIngestRequest":{"properties":{"date":{"type":"string","format":"date","title":"Date"},"tickers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tickers"}},"type":"object","required":["date"],"title":"DailyIngestRequest"},"DataQuality":{"type":"string","enum":["ok","estimated","missing_fields"],"title":"DataQuality"},"DividendDoc":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"ticker":{"type":"string","title":"Ticker"},"cash_amount":{"type":"number","title":"Cash Amount"},"currency":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Currency"},"frequency":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Frequency"},"dividend_type":{"anyOf":[{"type":"string","enum":["CD","SC","LT","ST"]},{"type":"null"}],"title":"Dividend Type"},"ex_dividend_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Ex Dividend Date"},"record_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Record Date"},"declaration_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Declaration Date"},"pay_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Pay Date"},"m":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"M"}},"type":"object","required":["ticker","cash_amount"],"title":"DividendDoc"},"DividendSearchRequest":{"properties":{"tickers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tickers"},"dividend_type":{"anyOf":[{"items":{"type":"string","enum":["CD","SC","LT","ST"]},"type":"array"},{"type":"null"}],"title":"Dividend Type"},"frequency":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Frequency"},"ex_dividend_date_from":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Ex Dividend Date From"},"ex_dividend_date_to":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Ex Dividend Date To"},"record_date_from":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Record Date From"},"record_date_to":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Record Date To"},"declaration_date_from":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Declaration Date From"},"declaration_date_to":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Declaration Date To"},"pay_date_from":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Pay Date From"},"pay_date_to":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Pay Date To"},"cash_amount_min":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cash Amount Min"},"cash_amount_max":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cash Amount Max"},"page":{"type":"integer","title":"Page","default":1},"page_size":{"type":"integer","title":"Page Size","default":100}},"type":"object","title":"DividendSearchRequest"},"DividendSearchResponse":{"properties":{"total":{"type":"integer","title":"Total"},"company_name":{"type":"string","title":"Company Name"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"results":{"items":{"$ref":"#/components/schemas/DividendDoc"},"type":"array","title":"Results"}},"type":"object","required":["total","company_name","page","page_size","results"],"title":"DividendSearchResponse"},"DividendTickerItem":{"properties":{"ticker":{"type":"string","title":"Ticker"},"count":{"type":"integer","title":"Count"},"last_ex_dividend_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Ex Dividend Date"},"market":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Market"}},"type":"object","required":["ticker","count"],"title":"DividendTickerItem"},"DividendTickersRequest":{"properties":{"frequency":{"type":"integer","title":"Frequency","default":12},"ex_dividend_date_from":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Ex Dividend Date From"},"ex_dividend_date_to":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Ex Dividend Date To"},"dividend_type":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Dividend Type"},"page":{"type":"integer","title":"Page","default":1},"page_size":{"type":"integer","title":"Page Size","default":100},"include_market":{"type":"boolean","title":"Include Market","default":true}},"type":"object","title":"DividendTickersRequest","description":"List unique dividend payers (tickers) for a given frequency.\nDefaults to monthly payers (12). You can optionally bound by ex_dividend_date window."},"DividendTickersResponse":{"properties":{"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"results":{"items":{"$ref":"#/components/schemas/DividendTickerItem"},"type":"array","title":"Results"}},"type":"object","required":["total","page","page_size","results"],"title":"DividendTickersResponse"},"FinancialPeriod":{"properties":{"fiscal_year":{"type":"integer","title":"Fiscal Year"},"fiscal_period":{"anyOf":[{"$ref":"#/components/schemas/FiscalPeriod"},{"type":"null"}]},"period_end_date":{"type":"string","format":"date","title":"Period End Date"},"income":{"anyOf":[{"$ref":"#/components/schemas/IncomeFlat"},{"type":"null"}]},"balance":{"anyOf":[{"$ref":"#/components/schemas/BalanceFlat"},{"type":"null"}]},"cashflow":{"anyOf":[{"$ref":"#/components/schemas/CashflowFlat"},{"type":"null"}]},"comprehensive":{"anyOf":[{"$ref":"#/components/schemas/ComprehensiveFlat"},{"type":"null"}]},"ratios":{"anyOf":[{"$ref":"#/components/schemas/Ratios"},{"type":"null"}]},"sources":{"anyOf":[{"items":{"$ref":"#/components/schemas/SourceRef"},"type":"array"},{"type":"null"}],"title":"Sources"},"flags":{"anyOf":[{"$ref":"#/components/schemas/PeriodFlags"},{"type":"null"}]}},"type":"object","required":["fiscal_year","period_end_date"],"title":"FinancialPeriod"},"FinancialsHistory":{"properties":{"ttm_points":{"items":{"$ref":"#/components/schemas/HistoryTTMPoint"},"type":"array","title":"Ttm Points","default":[]},"ttm_prev":{"anyOf":[{"$ref":"#/components/schemas/TTMBlock"},{"type":"null"}]},"recent_quarters":{"items":{"$ref":"#/components/schemas/RecentQuarter"},"type":"array","title":"Recent Quarters","default":[]}},"type":"object","title":"FinancialsHistory"},"FinancialsRatiosResponse":{"properties":{"meta":{"$ref":"#/components/schemas/Meta"},"periods":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Periods"}},"type":"object","required":["meta","periods"],"title":"FinancialsRatiosResponse"},"FinancialsSummaryResponse":{"properties":{"meta":{"$ref":"#/components/schemas/Meta"},"latest":{"$ref":"#/components/schemas/FinancialPeriod"},"trailing_twelve_months":{"anyOf":[{"$ref":"#/components/schemas/TTMBlock"},{"type":"null"}]},"deltas":{"anyOf":[{"$ref":"#/components/schemas/SummaryDeltas"},{"type":"null"}]},"history":{"anyOf":[{"$ref":"#/components/schemas/FinancialsHistory"},{"type":"null"}]}},"type":"object","required":["meta","latest"],"title":"FinancialsSummaryResponse"},"FinancialsTimeseriesResponse":{"properties":{"meta":{"$ref":"#/components/schemas/Meta"},"range":{"$ref":"#/components/schemas/RangeBlock"},"periods":{"items":{"$ref":"#/components/schemas/FinancialPeriod"},"type":"array","title":"Periods"}},"type":"object","required":["meta","range","periods"],"title":"FinancialsTimeseriesResponse"},"FiscalPeriod":{"type":"string","enum":["Q1","Q2","Q3","Q4","FY"],"title":"FiscalPeriod"},"GICSSector":{"type":"string","enum":["Energy","Materials","Industrials","Consumer Discretionary","Consumer Staples","Health Care","Financials","Information Technology","Communication Services","Utilities","Real Estate"],"title":"GICSSector","description":"Enum of standard GICS sectors for use in mappings and dropdowns."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoryTTMPoint":{"properties":{"period_end_date":{"type":"string","format":"date","title":"Period End Date"},"revenues":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Revenues"},"gross_profit":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gross Profit"},"operating_income":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Income"},"net_income":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Income"},"operating_cash_flow":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Cash Flow"},"free_cash_flow":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Free Cash Flow"}},"type":"object","required":["period_end_date"],"title":"HistoryTTMPoint"},"IncomeFlat":{"properties":{"revenues":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Revenues"},"cost_of_revenue":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cost Of Revenue"},"gross_profit":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gross Profit"},"operating_expenses":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Expenses"},"selling_general_and_administrative_expenses":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Selling General And Administrative Expenses"},"research_and_development":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Research And Development"},"operating_income_loss":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Income Loss"},"nonoperating_income_loss":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Nonoperating Income Loss"},"income_tax_expense_benefit":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Income Tax Expense Benefit"},"net_income_loss":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Income Loss"},"basic_earnings_per_share":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Basic Earnings Per Share"},"diluted_earnings_per_share":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Diluted Earnings Per Share"},"basic_average_shares":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Basic Average Shares"},"diluted_average_shares":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Diluted Average Shares"}},"type":"object","title":"IncomeFlat"},"IngestResponse":{"properties":{"inserted":{"type":"integer","title":"Inserted"},"duplicates":{"type":"integer","title":"Duplicates"},"attempted":{"type":"integer","title":"Attempted"},"collection":{"type":"string","title":"Collection"}},"type":"object","required":["inserted","duplicates","attempted","collection"],"title":"IngestResponse"},"Margins":{"properties":{"gross":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gross"},"operating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating"},"net":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net"},"ocf":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Ocf"}},"type":"object","title":"Margins"},"Meta":{"properties":{"ticker":{"type":"string","title":"Ticker"},"company_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company Name"},"currency":{"type":"string","title":"Currency","default":"USD"},"unit":{"type":"string","const":"absolute","title":"Unit","default":"absolute"},"periodicity":{"$ref":"#/components/schemas/Periodicity"},"asof":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Asof"},"version":{"type":"string","title":"Version","default":"v1"}},"type":"object","required":["ticker","periodicity"],"title":"Meta"},"MetricsSearchResponse":{"properties":{"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"results":{"items":{},"type":"array","title":"Results"}},"type":"object","required":["total","page","page_size","results"],"title":"MetricsSearchResponse"},"NewsItem":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"author":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"published_utc":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Published Utc"},"article_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Article Url"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"tickers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tickers"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}},"type":"object","title":"NewsItem"},"PeriodFlags":{"properties":{"restated":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Restated"},"partial_period":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Partial Period"},"data_quality":{"anyOf":[{"$ref":"#/components/schemas/DataQuality"},{"type":"null"}]},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","title":"PeriodFlags"},"Periodicity":{"type":"string","enum":["quarter","annual"],"title":"Periodicity"},"Provenance":{"properties":{"tools":{"items":{"$ref":"#/components/schemas/ProvenanceToolCall"},"type":"array","title":"Tools"},"extra":{"additionalProperties":true,"type":"object","title":"Extra"}},"additionalProperties":true,"type":"object","title":"Provenance","description":"Optional provenance block to show sources and timings."},"ProvenanceToolCall":{"properties":{"name":{"type":"string","title":"Name"},"args":{"additionalProperties":true,"type":"object","title":"Args"},"duration_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Ms"},"ok":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ok"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"}},"type":"object","required":["name"],"title":"ProvenanceToolCall","description":"Track each tool used to produce the view (for audit/debug display)."},"RangeBlock":{"properties":{"from":{"type":"string","format":"date","title":"From"},"to":{"type":"string","format":"date","title":"To"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["from","to","count"],"title":"RangeBlock"},"Ratios":{"properties":{"gross_margin":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gross Margin"},"operating_margin":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Margin"},"net_margin":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Margin"},"current_ratio":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Current Ratio"},"quick_ratio":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Quick Ratio"},"debt_to_equity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Debt To Equity"},"return_on_assets":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Return On Assets"},"return_on_equity":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Return On Equity"},"revenue_yoy":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Revenue Yoy"},"eps_yoy":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Eps Yoy"},"ocf_margin":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Ocf Margin"},"free_cash_flow":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Free Cash Flow"}},"type":"object","title":"Ratios"},"RebuildAllResponse":{"properties":{"cutoff":{"type":"string","title":"Cutoff"},"collection":{"type":"string","title":"Collection"},"total_metrics_docs":{"type":"integer","title":"Total Metrics Docs"},"status":{"type":"string","title":"Status"}},"type":"object","required":["cutoff","collection","total_metrics_docs","status"],"title":"RebuildAllResponse"},"RebuildOneResponse":{"properties":{"ticker":{"type":"string","title":"Ticker"},"cutoff":{"type":"string","title":"Cutoff"},"status":{"type":"string","title":"Status"}},"type":"object","required":["ticker","cutoff","status"],"title":"RebuildOneResponse"},"RebuildPayload":{"properties":{"workers":{"type":"integer","maximum":64.0,"minimum":1.0,"title":"Workers","description":"Number of parallel workers","default":12},"max_tickers":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Tickers","description":"Limit universe size (debug / partial run)"},"per_ticker_limit":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Per Ticker Limit","description":"Maximum number of filings per ticker","default":20},"throttle_ms":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Throttle Ms","description":"Throttle in milliseconds between ticker fetches","default":0}},"type":"object","title":"RebuildPayload"},"RecentQuarter":{"properties":{"fiscal_year":{"type":"integer","title":"Fiscal Year"},"fiscal_period":{"anyOf":[{"$ref":"#/components/schemas/FiscalPeriod"},{"type":"null"}]},"period_end_date":{"type":"string","format":"date","title":"Period End Date"},"revenue":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Revenue"},"operating_income":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Income"},"net_income":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Income"},"diluted_eps":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Diluted Eps"},"ocf":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Ocf"}},"type":"object","required":["fiscal_year","period_end_date"],"title":"RecentQuarter"},"ReorderPayload":{"properties":{"symbols":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Symbols"},"items":{"anyOf":[{"items":{"$ref":"#/components/schemas/WatchlistItem"},"type":"array"},{"type":"null"}],"title":"Items"}},"type":"object","title":"ReorderPayload"},"SortDir":{"type":"string","enum":["asc","desc"],"title":"SortDir"},"SourceRef":{"properties":{"provider":{"type":"string","title":"Provider","examples":["polygon","sec","internal"]},"filing_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filing Url"},"filing_file_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filing File Url"}},"type":"object","required":["provider"],"title":"SourceRef"},"SummaryDeltas":{"properties":{"revenue_qoq":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Revenue Qoq"},"revenue_yoy":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Revenue Yoy"},"eps_yoy":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Eps Yoy"},"net_income_yoy":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Income Yoy"}},"type":"object","title":"SummaryDeltas"},"TTMBlock":{"properties":{"revenues":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Revenues"},"gross_profit":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Gross Profit"},"operating_income":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Income"},"net_income":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Net Income"},"operating_cash_flow":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Operating Cash Flow"},"free_cash_flow":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Free Cash Flow"},"diluted_eps":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Diluted Eps"},"shares_diluted_avg":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Shares Diluted Avg"},"margins":{"anyOf":[{"$ref":"#/components/schemas/Margins"},{"type":"null"}]}},"type":"object","title":"TTMBlock"},"UIBadge":{"properties":{"label":{"type":"string","title":"Label"},"severity":{"anyOf":[{"type":"string","enum":["info","success","warn","danger"]},{"type":"null"}],"title":"Severity"},"tooltip":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tooltip"}},"type":"object","required":["label"],"title":"UIBadge","description":"Small label chips to surface quick facts."},"UIMeta":{"properties":{"ticker":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ticker","description":"Primary ticker symbol for the view, if any."},"asOf":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Asof","description":"ISO 8601 timestamp for the data snapshot the UI is showing."},"notes":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Notes","description":"Freeform short notes to display."}},"additionalProperties":true,"type":"object","title":"UIMeta","description":"Optional metadata the UI can show (e.g., header badges/tooltips)."},"UITable":{"properties":{"id":{"type":"string","title":"Id","description":"Stable ID so Angular can track the table."},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"columns":{"items":{"$ref":"#/components/schemas/UITableColumn"},"type":"array","title":"Columns"},"rows":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Rows"}},"type":"object","required":["id","columns"],"title":"UITable","description":"Tabular data the Angular app can bind directly to PrimeNG."},"UITableColumn":{"properties":{"field":{"type":"string","title":"Field","description":"Row object key."},"header":{"type":"string","title":"Header","description":"Column header title displayed in the UI."}},"type":"object","required":["field","header"],"title":"UITableColumn","description":"Column definition for PrimeNG <p-table>."},"UpsertPayload":{"properties":{"tickers":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Tickers","description":"List of tickers to fetch/upsert"},"workers":{"type":"integer","maximum":64.0,"minimum":1.0,"title":"Workers","default":12}},"type":"object","required":["tickers"],"title":"UpsertPayload"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WatchlistCreate":{"properties":{"name":{"type":"string","maxLength":120,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"tickers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tickers"},"isDefault":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Isdefault","default":false}},"type":"object","required":["name"],"title":"WatchlistCreate"},"WatchlistItem":{"properties":{"symbol":{"type":"string","maxLength":20,"minLength":1,"title":"Symbol"},"position":{"type":"integer","minimum":1.0,"title":"Position"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["symbol","position"],"title":"WatchlistItem"},"WatchlistOut":{"properties":{"_id":{"type":"string","title":"Id"},"userId":{"type":"string","title":"Userid"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"tickers":{"items":{"$ref":"#/components/schemas/WatchlistItem"},"type":"array","title":"Tickers"},"createdAt":{"type":"string","title":"Createdat"},"updatedAt":{"type":"string","title":"Updatedat"},"isDefault":{"type":"boolean","title":"Isdefault","default":false}},"type":"object","required":["_id","userId","name","tickers","createdAt","updatedAt"],"title":"WatchlistOut"},"WatchlistUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":120,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Description"},"isDefault":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Isdefault"}},"type":"object","title":"WatchlistUpdate"}}}}