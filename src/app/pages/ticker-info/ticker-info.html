<div class="mx-auto max-w-[1600px] space-y-6">

  <!-- When no ticker chosen -->
  @if (!currentTicker()) {
    <div class="opacity-70 mt-6">
      Pick a ticker to view price chart, news, corporate actions, and dividend info.
    </div>
  }

  <!-- Always-visible controls -->
  <div class="flex items-center gap-3 mt-6">
    <app-ticker-autocomplete
      [placeholder]="'Search tickerâ€¦'"
      (picked)="onPick($event)"
      (cleared)="onClear()">
    </app-ticker-autocomplete>

    <button
      class="px-3 py-1 rounded bg-blue-600 text-white text-sm"
      (click)="theme = theme === 'dark' ? 'light' : 'dark'">
      Toggle Theme (Current: {{ theme }})
    </button>
  </div>

  <!-- When ticker selected: render overview + sections -->
  @if (currentTicker(); as t) {
    <h2 class="text-xl font-semibold mt-6">Overview: {{ t }}</h2>

    <section class="grid grid-cols-12 gap-6">
      <!-- Chart: take more space on wide screens -->
      <div class="col-span-12 lg:col-span-7 xl:col-span-8">
        <h3 class="font-semibold mb-2">Price Chart</h3>
        <app-chart
          [ticker]="t"
          [timespan]="'day'"
          [multiplier]="1"
          [adjusted]="true"
          [sort]="'asc'"
          [theme]="theme">
        </app-chart>
      </div>

      <!-- News: complementary width -->
      <div class="col-span-12 lg:col-span-5 xl:col-span-4">
        <h3 class="font-semibold mb-2">Latest News</h3>
        <div class="h-[420px] overflow-y-auto pr-2">
          <app-news [ticker]="t"></app-news>
        </div>
      </div>
    </section>

    <!-- Dividends -->
    <section class="space-y-4">
      <h3 class="font-semibold">Dividends</h3>
      <div class="w-full">
        <app-dividend-ticker-history [ticker]="t"></app-dividend-ticker-history>
      </div>
      <div class="w-full">
        <app-dividend-ticker-yearly-history [ticker]="t"></app-dividend-ticker-yearly-history>
      </div>
    </section>

    <!-- Corporate Actions moved to bottom -->
    <section>
      <div class="card p-4 shadow-sm rounded-lg w-full">
        <h3 class="font-semibold mb-2">Corporate Actions</h3>
        <!-- splits, symbols changes, etc. -->
        <div class="text-sm opacity-70">[ Actions for {{ t }} ]</div>
      </div>
    </section>
  }
</div>
