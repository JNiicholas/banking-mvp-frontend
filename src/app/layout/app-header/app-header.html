<header class="app-header">
  <div class="brand">
    <button type="button" class="name text-primary brand-link" (click)="goHome()" aria-label="Go to home">
      <i class="pi pi-globe mr-2"></i> Banking App
    </button>
  </div>

  <!-- MegaMenu -->
  <p-megaMenu
    [model]="items"
    orientation="horizontal"
    class="main-megamenu topbar-mega"
  ></p-megaMenu>

  <!-- Right side actions -->
  <div class="header-actions">
    <p-avatar
      icon="pi pi-user"
      class="mr-2 cursor-pointer"
      size="large"
      style="background-color: var(--p-button-primary-background); color: var(--p-button-primary-color);"
      shape="circle"
      (click)="userPopover.toggle($event)"
      aria-label="Open user menu"
    />
    <app-login-button />
  </div>

  <p-popover #userPopover>
    <div class="flex flex-col gap-4 min-w-64">
      <div class="flex items-center gap-3">
        <p-avatar
          icon="pi pi-user"
          size="large"
          style="background-color: var(--p-button-primary-background); color: var(--p-button-primary-color);"
          shape="circle"
        />
        <div>
          <span class="font-medium block">{{ userFirstName || 'User' }} {{ userLastName || '' }}</span>
          <div class="text-sm text-surface-500 dark:text-surface-400">{{ userEmail || '' }}</div>
        </div>
      </div>

      <div *ngIf="userRoles?.length; else noRoles">
        <span class="font-medium block mb-2">Roles</span>
        <div class="flex flex-wrap gap-2">
          <span *ngFor="let role of userRoles" class="p-chip p-component">{{ role }}</span>
        </div>
      </div>
      <ng-template #noRoles>
        <div class="text-sm text-surface-500 dark:text-surface-400">No roles</div>
      </ng-template>
    </div>
  </p-popover>
</header>